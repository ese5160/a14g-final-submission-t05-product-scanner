<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>a14g-final-submission README</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      line-height: 1.6;
      background-color: #FFB6C1;
    }
    img {
      max-width: 100%;
      height: auto;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 20px;
    }
    ul {
      padding-left: 20px;
    }
  </style>
</head>
<body>
  <h1>Product Scanner! ESE516 TEAM5</h1>
  
  <p><strong>Team Number:</strong> 5</p>
  <p><strong>Team Name:</strong> Pruduct Scanner</p>
  <p><strong>Team Members:</strong> Tianshu Wang & Jin Qian</p>
  <p><strong>Github Repository URL:</strong> <a href="https://github.com/ese5160/a14g-final-submission-t05-product-scanner">https://github.com/ese5160/a14g-final-submission-t05-product-scanner</a></p>
  <p><strong>Description of test hardware:</strong> (development boards, sensors, actuators, laptop + OS, etc)</p>
  
  <h2>1. Video Presentation</h2>
  <hr>
  <div align="center">
    <a href="https://www.youtube.com/watch?v=oSgTU4lZSk4">
      <img src="https://img.youtube.com/vi/oSgTU4lZSk4/0.jpg" alt="Video Thumbnail" width="500">
    </a>
  </div>
  
  <h2>2. Project Summary</h2>
  <hr>
  <h3>Device Description</h3>
  <p>Our device serves as a supermarket product scanner, allowing customers to scan QR codes to access item information such as location, name, and stock quantity displayed on an LCD screen. Supermarket staff can monitor the products scanned by customers and their respective locations via the terminal web page. Moreover, employees can also track the temperature and humidity within the supermarket to assess if environmental adjustments are necessary.</p>
  
  <h3>Inspiration</h3>
  <p>The inspiration for this product mainly came from what we saw in supermarkets with large indoor areas (such as Costco and Walmart). When we shop in these supermarkets, we often encounter the situation where we want to buy a small product, but it is difficult to find the product because the supermarket is too large. Therefore, our team wants to design a device that can scan the product's QR code. After scanning the QR code, the specific location of the item you are looking for, as well as the price and remaining quantity information can be displayed. Additionally, this product has a built-in temperature and humidity sensor. This information will be sent back to the computers of supermarket staff, allowing them to monitor the environment in the supermarket and adjust the air conditioning temperature in time to ensure that the products are fresh enough to prevent deterioration. Therefore, the target customers of this product are the operators of these large supermarkets. It can be installed on supermarket shopping carts for customers to use.</p>
  
  <h3>Device Functionality</h3>
  <p>We have designed a device capable of scanning QR codes to retrieve product information while simultaneously monitoring indoor temperature and humidity. The data collected by this device can be transmitted over the network and displayed on the terminal web page using Node-RED. Our device consists of two sensors and two actuators. The sensors include an SHTC3 temperature and humidity sensor and a QR code scanner, while the actuators comprise a vibrating motor and a color LCD screen.</p>
  
  <p>The overall workflow of our product is as follows:
    <ol>
      <li>When a customer uses the device to scan a QR code, the QR code scanner identifies the scanned QR code and provides vibration feedback to the customer using the vibrating motor.</li>
      <li>The information retrieved from the scan is displayed on the LCD screen, showing the product's location, name, and inventory quantity.</li>
      <li>The location information of the scanned items is also uploaded to the Node-RED UI interface, allowing access to this information via devices such as computers or smartphones.</li>
      <li>Finally, the SHTC3 sensor installed within our device continuously monitors the temperature and humidity of the supermarket. This information is uploaded to the Node-RED UI interface for display. Additionally, if the temperature exceeds a certain threshold or the humidity reaches a high level, a pop-up warning will appear on the page, alerting staff to adjust the air conditioning settings in that area.</li>
    </ol>
  </p>
  
  <h3>Challenges</h3>
  <p>In general, we faced four challenges and partly solved them in the right way.</p>
  
  <h4>1. LCD Configuration</h4>
  <p>Our initial challenge stemmed from the SPI configuration for the LCD screen. Upon configuring the LCD, we encountered difficulty as the designated pin ports of the MCU couldn't be configured with SPI. This oversight likely occurred due to not verifying the configuration in Atmel Start during PCB design. Instead, we relied on the SPI line indicated on the MCU in the Altium schematic.</p>
  
  <h3>Prototype Learnings</h3>
  <p>Reflecting on the process of building and testing our prototype, where we created and utilized our own PCB, several critical lessons emerged. First, the utility of test points was evident; they greatly facilitated troubleshooting and functional verification at various stages. When selecting pins, it is essential to ensure they align with the intended use and hardware compatibility, which is the most significant part of implementing PCB in the real project.</p>
  
  <h3>Next Steps</h3>
  <p>In terms of hardware, our next step is to re-modify our own PCBA board and solve the previous wiring and connector problems so that the board will no longer have any physical errors and will be more convenient for subsequent use. At the same time, a module for communicating with the Internet is installed on the PCBA to improve the functionality of this product.</p>
  
  <h3>Takeaways from ESE5160</h3>
  <p>What did you learn in ESE5160 through the lectures, assignments, and this course-long prototyping project?</p>
  <ol>
    <li>The first and most important thing is to learn how to design PCBA boards through Altium, and know how to place components and correctly connect circuits.</li>
    <li>Learned how to test and debug hardware through oscilloscopes and other instruments, find circuit faults and find ways to solve them.</li>
    <li>Learned how to design a UI interface for your own product through node-red. Through node-red, I can try to think from the customer's perspective on how to design the UI interface to be more concise and easy to use.</li>
    <li>Learn how to write code correctly to ensure that various components have enough heap space to allow them to run in an orderly and continuous manner.</li>
  </ol>
  
  <h3>Project Codebase Links</h3>
  <ul>
    <li><strong>Node-RED instance:</strong> <a href="http://52.177.130.52:1880/ui">http://52.177.130.52:1880/ui</a></li>
    <li><strong>A12G Code Repository:</strong> <a href="https://github.com/ese5160/a12g-firmware-drivers-t05-product-scanner">GitHub Repository</a></li>
    <li><strong>Final PCBA on Altium 365:</strong> <a href="https://upenn-eselabs.365.altium.com/designs/CA7AC7AB-A449-4488-9C62-C8DDCABF01EC">Altium 365 Link</a></li>
  </ul>
  
  <h2>3. Hardware & Software Requirements</h2>
  <hr>
  <!-- 硬件要求 -->
  <h3>Hardware Requirements</h3>
  <ul>
    <li><strong>HRS 01 - SAMW25 Microcontroller</strong>: Our project is based on a self-designed PCB. The MCU of this PCB is the SAMW25 microcontroller, with J-link used to flash the code into the PCB.</li>
    <li><strong>HRS 02 - SHTC3-TR-10KS Sensor</strong>: In compliance with HRS 02, our system employs the SHTC3-TR-10KS sensor, which detects a wide range of temperature (-40 °C to 125 °C) and humidity (0 to 100 %RH). The typical accuracy is ±2 %RH for humidity and ±0.2°C for temperature, but our software configuration displays accuracy to ±1°C for temperature and ±1 %RH for humidity due to integer data type limitations.</li>
    <li><strong>HRS 03 - 1.8" Color TFT LCD with SPI Interface</strong>: The implementation of the 1.8" Color TFT LCD with an SPI interface in our project was crucial for displaying detailed product information. This LCD module communicates with the microcontroller through the SPI, ensuring swift and stable data updates.</li>
    <li><strong>HRS 04 - Tiny Code Reader from Useful Sensors</strong>: The Tiny Code Reader captures and interprets QR codes effectively, with an LED indicator that signals the scanning process status. It communicates with the microcontroller via I2C, changing from blue to green upon a successful scan.</li>
    <li><strong>HRS 05 - ADA1201 Vibrating Motor</strong>: The ADA1201 vibrating motor is integrated as a tactile feedback mechanism. It sends a vibration alert each time an item is scanned and when the user finishes shopping, enhancing the user experience with immediate physical feedback.</li>
    <li><strong>HRS 06 - System Integration and Control</strong>: Our development team has implemented a system that integrates multiple hardware components to ensure smooth and efficient operation. The device operates on a 3.7V Li-Ion battery, with a tested continuous operational capability of at least 3 hours.</li>
  </ul>
  
  <h3>Software Requirements</h3>
  <ul>
    <li><strong>SRS 01 - QR Code Scanning and Processing</strong>: The Adafruit 5744 QR code reader scans QR codes on products with a response time of less than 2 seconds per scan. While the I2C protocol speed is assumed to be efficient, we lack tools to measure the exact speed, focusing on the operational performance.</li>
    <li><strong>SRS 02 - Display Management</strong>: We manage a 1.8" Color TFT LCD screen with an SPI interface, capable of displaying product details. Current performance shows a refresh time of approximately one to two seconds, slower than the desired 500 milliseconds.</li>
    <li><strong>SRS 03 - Temperature and Humidity Monitoring</strong>: The software interfaces with the SHTC3-TR-10KS sensor, collecting and transmitting temperature and humidity data every 5 seconds via MQTT to Node-RED for real-time monitoring and analysis.</li>
    <li><strong>SRS 04 - Wireless Data Transmission</strong>: Using the SAMW25 Wi-Fi microcontroller, our system handles data transmission over a 2.4 GHz Wi-Fi network, supporting 802.11 b/g/n standards with a minimum data transfer rate of 150 Mbps. It seamlessly connects to various networks and interfaces with different server configurations.</li>
    <li><strong>SRS 05 - User Interaction and Feedback</strong>: The ADA1201 vibrating motor is controlled by software to activate for 0.5 seconds for scan confirmations and alerts, with a slight delay in the vibration timing due to code issues but still delivering timely feedback.</li>
  </ul>
  
  <h2>4. Project Photos & Screenshots</h2>
  <hr>
  <!-- 项目照片和截图 -->
<h3>Project Overview</h3>
<p align="center">
  <img src="https://raw.githubusercontent.com/ese5160/a14g-final-submission-t05-product-scanner/c162c533084e7cf31271affe63db91da0da71482/Screenshoot%20and%20photo/project%20whole%20view.jpg" alt="Project Whole View">
</p>
<p>Description: Image of the complete final project setup, showcasing all external components like 3D prints, screens, and buttons.</p>

<h3>Standalone PCBA - Top View</h3>
<p align="center">
  <img src="https://raw.githubusercontent.com/ese5160/a14g-final-submission-t05-product-scanner/c162c533084e7cf31271affe63db91da0da71482/Screenshoot%20and%20photo/top%20view.jpg" alt="Top View of the Project">
</p>
<p>Description: Top view of the standalone printed circuit board assembly (PCBA).</p>

<h3>Standalone PCBA - Bottom View</h3>
<p align="center">
  <img src="https://raw.githubusercontent.com/ese5160/a14g-final-submission-t05-product-scanner/c162c533084e7cf31271affe63db91da0da71482/Screenshoot%20and%20photo/bottom%20view.jpg" alt="Bottom View of the Project">
</p>
<p>Description: Bottom view of the standalone printed circuit board assembly (PCBA).</p>

<h3>Thermal Camera Images</h3>
<p align="center">
  <img src="https://raw.githubusercontent.com/ese5160/a14g-final-submission-t05-product-scanner/6964ed1636cebddd1652234701ce6b7a7d6260d8/Screenshoot%20and%20photo/heat.jpg" alt="Thermal Image of the Project">
</p>
<p>Description: Thermal camera image showing the board while running under load. Useful for assessing thermal performance and hot spots.</p>

<h3>Altium Board Design - 2D View</h3>
<p align="center">
  <img src="https://raw.githubusercontent.com/ese5160/a14g-final-submission-t05-product-scanner/6c43691008a2297e01a813adfb7e6db17f67d84f/Screenshoot%20and%20photo/Altium2D.png" alt="Altium 2D Design View">
</p>
<p>Description: Screenshot of the 2D view of the Altium board design, highlighting the layout and component placement.</p>

<h3>Altium Board Design - 3D View</h3>
<p align="center">
  <img src="https://raw.githubusercontent.com/ese5160/a14g-final-submission-t05-product-scanner/6964ed1636cebddd1652234701ce6b7a7d6260d8/Screenshoot%20and%20photo/Altium3D.png" alt="Altium 3D Design View">
</p>
<p>Description: Screenshot of the 3D view of the Altium board design, providing a realistic visualization of the assembled board.</p>

<h3>Node-RED Dashboard</h3>
<div align="center">
<table><tr>
<td><img src="https://raw.githubusercontent.com/ese5160/a14g-final-submission-t05-product-scanner/c9cebeca9828a5b46dd6704f85250149a4dccd75/Screenshoot%20and%20photo/Login%20page.png" width="1000"/></td>
<td><img src="https://raw.githubusercontent.com/ese5160/a14g-final-submission-t05-product-scanner/c9cebeca9828a5b46dd6704f85250149a4dccd75/Screenshoot%20and%20photo/Data%20page.png" width="1000"/></td>
</tr><tr>
<td><img src="https://raw.githubusercontent.com/ese5160/a14g-final-submission-t05-product-scanner/c9cebeca9828a5b46dd6704f85250149a4dccd75/Screenshoot%20and%20photo/OTA%20reset.png" width="1000"/></td>
<td><img src="https://raw.githubusercontent.com/ese5160/a14g-final-submission-t05-product-scanner/c9cebeca9828a5b46dd6704f85250149a4dccd75/Screenshoot%20and%20photo/Qr%20massage.png" width="1000"/></td>
</tr></table>
</div>
<p>Description: Screenshots of the Node-RED dashboard, displaying the user interface and data visualization components.</p>

<h3>Node-RED Backend</h3>
<div align="center">
<table><tr>
<td><img src="https://raw.githubusercontent.com/ese5160/a14g-final-submission-t05-product-scanner/c9cebeca9828a5b46dd6704f85250149a4dccd75/Screenshoot%20and%20photo/Userpage.png" width="1000"/></td>
<td><img src="https://raw.githubusercontent.com/ese5160/a14g-final-submission-t05-product-scanner/c9cebeca9828a5b46dd6704f85250149a4dccd75/Screenshoot%20and%20photo/Qrcode%20scanner.png" width="1000"/></td>
</tr><tr>
<td colspan="2"><img src="https://raw.githubusercontent.com/ese5160/a14g-final-submission-t05-product-scanner/c9cebeca9828a5b46dd6704f85250149a4dccd75/Screenshoot%20and%20photo/OTAFU.jpg" width="1000"/></td>
</tr></table>
</div>
<p>Description: Screenshots of the Node-RED backend, illustrating the flow and logic used to process data.</p>

<h3>System Block Diagram</h3>
<p>Description: Updated block diagram of the system, reflecting changes and integration details from the semester.</p>

<h2>5. Project Codebase Links</h2>
<hr>
<!-- 项目代码库链接 -->
<ul>
  <li><strong>Node-RED instance:</strong> <a href="http://52.177.130.52:1880/ui">http://52.177.130.52:1880/ui</a></li>
  <li><strong>A12G Code Repository:</strong> <a href="https://github.com/ese5160/a12g-firmware-drivers-t05-product-scanner">GitHub Repository</a></li>
  <li><strong>Final PCBA on Altium 365:</strong> <a href="https://upenn-eselabs.365.altium.com/designs/CA7AC7AB-A449-4488-9C62-C8DDCABF01EC">Altium 365 Link</a></li>
</ul>
  <!-- 项目照片和截图 -->
  
</body>
</html>
